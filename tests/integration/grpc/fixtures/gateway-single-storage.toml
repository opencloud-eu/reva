[shared]
jwt_secret = "changemeplease"
gatewaysvc = "{{grpc_address}}"

[grpc]
address = "{{grpc_address}}"

[grpc.services.gateway]
# registries
storageregistrysvc = "{{grpc_address}}"
userprovidersvc = "{{users_address}}"
stat_cache_ttl = 1
permissionssvc = "{{permissions_address}}"# sharing
usershareprovidersvc = "{{shares_address}}"
publicshareprovidersvc = "{{shares_address}}"

[grpc.services.authregistry]
driver = "static"

[grpc.services.authregistry.drivers.static.rules]
basic = "{{users_address}}"
publicshares = "{{shares_address}}" # started with the shares.toml

[grpc.services.storageregistry]
driver = "spaces"

[grpc.services.storageregistry.drivers.spaces]
home_template = "/users/{{.Id.OpaqueId}}"

[grpc.services.storageregistry.drivers.spaces.providers."{{storage_address}}".spaces]
"personal" = { "mount_point" = "/users", "path_template" = "/users/{{.Space.Owner.Id.OpaqueId}}" }
"project" = { "mount_point" = "/users/[^/]+/Projects", "path_template" = "/users/{{.CurrentUser.Id.OpaqueId}}/Projects/{{.Space.Name}}" }

[grpc.services.storageregistry.drivers.spaces.providers."{{storage_publiclink_address}}"]
providerid = "7993447f-687f-490d-875c-ac95e89a62a4"
[grpc.services.storageregistry.drivers.spaces.providers."{{storage_publiclink_address}}".spaces]
"grant" = { "mount_point" = "." }
"mountpoint" = { "mount_point" = "/public", "path_template" = "/public/{{.Space.Root.OpaqueId}}" }

[http]
address = "{{grpc_address+1}}"

[http.services.datagateway]
transfer_shared_secret = "replace-me-with-a-transfer-secret"
